<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>AccountingJXML</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap-journal.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/simple-sidebar.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

</head>

<body>

<div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand h1">
                <a href="index.html">
                    <i class="fas fa-home"> AccountingJXML</i>
                </a>
            </li>
            <li>
                <a href="database.html"><i class="fas fa-database h6"> Database</i></a>
            </li>
            <li>
                <a href="functionality.html"><i class="fas fa-cogs h6"> Functionality</i></a>
            </li>
            <li>
                <a href="gui.html"><i class="fas fa-desktop h6"> GUI</i></a>
            </li>
            <li>
                <a href="reports.html"><i class="fas fa-paperclip h6"> Reports</i></a>
            </li>
            <li>
                <a clas="text-right" href="resources.html"><i class="fas fa-cubes h6"> Resources</i></a>
            </li>
            <li>
                <a class="text-left" href="javadoc/index.html" target="_blank"><i class="fab fa-java h6"> JavaDoc</i></a>
            </li>
        </ul>
    </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <h1 class="underline">Database</h1>

            <!-- TOC -->
            <div id="toc" class="toc"><div class="toctitle"><h5>Contents</h5></div>
                <ul>
                <li class="toclevel-1 tocsection-1"><a href="#eXits-db">1 eXist-db</a><ul></ul></li>
                <li class="toclevel-1 tocsection-1"><a href="#Implementation">2 Implementation</a><ul></ul></li>
                </ul>
            </div>

            <h3 id="eXits-db" class="underline">eXist-db 
                <span style="float: right;">
                    <a href="http://exist-db.org/exist/apps/homepage/index.html"><i class="fas fa-link h3"></i></a>
                    <a href="https://github.com/eXist-db/exist"><i class="fab fa-github-square h3"></i></a>
                </span>
            </h3>
            <p>
                eXist-db (or eXist for short) is an open source software project for NoSQL databases built
                on XML technology.<br/>
                It is classified as both a NoSQL document-oriented database system and a native XML database 
                (and it provides support for XML, JSON, HTML and Binary documents). Unlike most relational 
                database management systems (RDBMS) and NoSQL databases eXist provides XQuery and XSLT as its 
                query and Application programming languages.
            </p>

            <h3 id="Implementation" class="underline">Implementation</h3>
            <p>
                Database layer uses eXist-db as it's native XML database with eXist being started in embedded mode.
                eXist is used for data storage in xml form as well as it's validation using provided schema.
            </p>
            <img src="resources/Diagram1.png" alt="diagram1" width="50%" height="50%">
            <p>
                Invoices are stored within a database as records with every invoice being represented as a single record.
                Every record contains list of invoices, invoice information, shipping address and information about entity.
                Depending on type of invoice (expanse, revenue), the entity is interpreted as either the payer or seller
                and contains bank, identification, name, address and contact information. Owner information are stored 
                separately from the records as the owner (user) is expected to be part of every provided invoice.
            </p>
            <p>
                Records themselves are represented as objects with provided getter and setter function for given atribute.
                Invoice items are represented as separe objects kept within each record. These records can then be static or
                dynamic. Changes to static records do not reflect on database while dynamic do. For some transaction control
                the Database provides commit and rollback functionality.
            </p>
            <p>
                Database consistency is insured with XML validation both within the eXist-db as well as within the Database 
                class. However it only enforces the format necessary for the database (including types) and leaves more
                specific content format upper layers.
            </p>
            <p>
                For exporting invoices into PDF the Database provides several output formats of the database contents. For
                calculating earnings and losses it provides getters in range as well as sum using XQuery.
            </p>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

</body>

</html>
